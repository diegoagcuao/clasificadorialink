{% extends "base.html" %}

{% block title %}Mis Enlaces - LinkScribe{% endblock %}

{% block content %}
    <h1 class="my-4">Bienvenido, {{ current_user.username }}</h1>
    <form action="/procesar_link" method="POST" class="form-group">
        <label for="enlace">Ingresa el enlace:</label>
        <input type="text" id="enlace" name="enlace" class="form-control mb-3" placeholder="https://ejemplo.com" required>
        <button type="submit" class="btn btn-primary">Procesar Enlace</button>
    </form>

    <h1 class="my-4">Mis Enlaces Guardados</h1>

    {% if links %}
        <ul class="list-group">
            {% for link in links %}
            <li class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex">
                        <!-- Imagen del enlace o imagen por defecto -->
                        <div class="mr-3">
                            <img src="{{ link.imagen }}" alt="Imagen de vista previa" style="max-width: 100px; max-height: 100px;">
                        </div>
                
                        <!-- Título, descripción y categoría del enlace -->
                        <div>
                            <a href="{{ link.enlace }}" target="_blank" class="h5 d-block">{{ link.titulo }}</a>
                            <p>{{ link.descripcion }}</p>
                            <p><strong>{{ link.categoria }}</strong></p>
                        </div>
                    </div>
                
                    <!-- Iconos -->
                    <div class="ml-auto d-flex align-items-center">
                        <form action="/eliminar_link/{{ link.id }}" method="POST" style="display:inline;">
                            <!-- Icono de eliminar (X) -->
                            <button type="submit" class="btn btn-danger btn-sm mr-2" title="Eliminar">
                                <i class="fas fa-times"></i> <!-- Este es el ícono de la "X" -->
                            </button>
                        </form>
                        <!-- Icono de agregar a lista (+) -->
                        <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modalAgregarLista" onclick="openModal({{ link.id }})" title="Agregar a Lista">
                            <i class="fas fa-plus"></i> <!-- Este es el ícono del "+" -->
                        </button>
                    </div>
                </div>
                
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">No tienes ningún enlace guardado.</p>
    {% endif %}


    {% include "modals/modal_agregar_lista.html" %}
    {% include "modals/modal_exito.html" %}

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}